---
layout: post
title: "[SAP] ABAP 開発環境をインストールする Part2"
date: 2010-12-26 15:09:52.000 +09:00
categories:
- SAP
tags:
- ABAP
- NetWeaver
- SAPinst
---

インストーラのダウンロード、インストール環境の準備は終わったので、満を持してインストーラを起動します。が、その前に、SAP の構成について簡単にまとめます。

 
まず、SAP って何よって話。基幹システム、ERP、R/3、SD/MMとかでしょ？などといろいろ答えが返ってきそうです。専門分野によっても異なるんでしょうね。厳密にいうと、SAP という製品は存在せず、SAP とは単なる会社名です。多岐にわたる製品を販売していますが、その中でもメジャーな製品は SAP ERP と、SAP NetWeaver でしょうか。で、SAP ERPって何、と聞く人はあまりいないでしょう。文字通り、SAP 社が開発/販売している ERP システムです。

 
混同されやすいのが SAP NetWeaver です。端的に言えば SAP NetWeaver とは、SAP 社が開発/販売している アプリケーション サーバーの製品名です。ジャンル的には Apache や IIS、J2EE と同じですね。IIS の場合は C# や VB.NET で開発して、Web アプリケーションとしてブラウザで閲覧するのが主要な使い方ですが、これが NetWeaver の場合は、ABAP や Java で開発して、ブラウザ、もしくは SAP GUI という専用クライアントから操作する、という話になります。

 
開発言語は ABAP と Java の 2種類あります。NetWeaver の上に ERP のロジックを ABAP プログラムで書いてデプロイしたものが SAP ERP です。（正確にいうと、ERP の Java コンポーネントもありますが・・・） 基本的には NetWeaver ABAP と NetWeaver Java は別々に構築する必要があります。1つのNetWeaver で両言語をサポートさせる構成については、NetWeaver 7.01 になってから不可能になりました。なお、NetWeaver Java は一応 J2EE 準拠だったと思います。

 
ABAP は ERP などの基幹系のロジックを記述するバックエンドのプログラムに使い、Java は フロントエンドの UI 開発に使う、というのが基本的な使い方です。NetWeaver ABAP 自体は HTTP, SOAP, RPC (RFC) などのプロトコルに対応していますが、SAP GUI という専用クライアントは DIAG とかいう未知のプロトコルを使って通信しています。DIAG の試用は確か非公開です。したがって、SAP GUI のようなクライアントソフトを他社が開発することはできないようになっています。

 
最後に、NetWeaver は RDBMS がないと動きません。

 
以上を踏まえて、今回インストールするのは NetWeaver ABAP です。ダウンロードした 4GB 弱のファイルの中に以下のものは全部含まれています。JRE は別途ダウンロードが必要でしたけどね。

 
- SAP NetWeaver ABAP 本体 
- MaxDB サーバー 
- MaxDB 管理ツール (CUI) 
- MaxDB 管理ツール (GUI) 
- SAP GUI 

 
最初の 3つ、NetWeaver と MaxDB は一度のインストールで勝手に入ります。MaxDB の GUI 管理ツールと、SAP 専用クライアントである SAP GUI は別途インストールする必要があります。今回は VMware 仮想マシンを使うのですが、SAP GUI だけは ホスト OS にインストールすることにします。

 
今回も前置きがずいぶん長くなりましたが、まずは NetWeaver 本体のインストールです。ゲスト OS でインストーラを実行します。ダウンロードしたファイルを全部ゲスト OS 上にコピーするのは面倒なので、解凍したインストーラを ISO で固めて、ゲスト OS にマウントさせると楽です。ISO 化は Windows AIK に付属している oscdimg を使いました。もちろん WinRAR でもなんでもいけます。

 
次のプログラムを実行します。管理者特権が必要なので、Administrator でインストールします。

 
SAP_NetWeaver_702e_Installation_Master\IM_WINDOWS_I386\sapinst.exe <br />
![]({{site.assets_url}}2010-12-26-image.png)

 
図のように選択し、&#x5b;Next&#x5d; をクリックします。 <br />
![]({{site.assets_url}}2010-12-26-image1.png)

 
インストールのための環境変数などが自動的に設定されるので、一度ログオフする必要があります。&#x5b;OK&#x5d; をクリックすると、ログオフします。 <br />
![]({{site.assets_url}}2010-12-26-image2.png)

 
使用許諾を読み、&#x5b;I accept&#x5d; を選択してから &#x5b;Next&#x5d; をクリックします。 <br />
![]({{site.assets_url}}2010-12-26-image3.png)

 
パスワードを設定します。このパスワードは、SAP用に作成される Windows ユーザー、MaxDB ユーザー、SAP ユーザーに適用されます。Windows のパスワードポリシーに合致していないと、インストール中にユーザー作成が失敗して面倒なことになるので、それなりに複雑なものを設定しましょう。私は pswd_NSP を使っています。 <br />
![]({{site.assets_url}}2010-12-26-image4.png)

 
マシンのスペックが足りない、と怒られます。インストール画面にも出ていますが、無視可能です。&#x5b;Cancel&#x5d; をクリックします。 <br />
![]({{site.assets_url}}2010-12-26-image5.png)

 
サマリ画面が表示されます。&#x5b;Next&#x5d; をクリックするとインストールが開始されます。なお、選択画面が表示されずにデフォルト設定になっているものが数多くあるので、必ず設定項目を確認しましょう。特に、インストールドライブは要注意です。今回はすべて C ドライブにインストールするのでデフォルト設定で構わないのですが、もしドライブを分けたければ、ここで必要な項目にチェックをつけて &#x5b;Revise&#x5d; をクリックして下さい。すると、ドライブ選択の画面が表示されます。インストールドライブのほかに、データベースファイルの個数や、サイズなども変更可能です。なお、SID については NSP で固定です。確かこれを変えてインストールを続行すると、インストールがエラーになってしまいます。なお、NSPというのは Mini SAP の略語です。 書き忘れましたが、インスタンス番号は 00 です。これは変えられるかもしれませんが、やったことないです。 <br />
![]({{site.assets_url}}2010-12-26-image6.png)

 
インストール中の画面です。Import ABAP というフェーズで数時間かかります。エラーのときはポップアップが出るので、何も出ていない限りは問題なく動いています。気長に待ちましょう。 <br />
![]({{site.assets_url}}2010-12-26-image7.png)

 
プロセッサもメモリも頑張っています。 <br />
![]({{site.assets_url}}2010-12-26-image8.png)

 
無事にインストールが終わると、次のポップアップが表示されるので &#x5b;OK&#x5d; をクリックします。私の環境では特にエラーもなく、6時間ぐらいかかりました。ずっと張り付いているのは現実的ではないので、夜にインストールして睡眠を取りましょう。 <br />
![]({{site.assets_url}}2010-12-26-image9.png)

